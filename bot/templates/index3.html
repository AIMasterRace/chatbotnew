{% load static %}

<head>
    <title>
        CareerIQ
    </title>
    <link rel="icon" href="{%static 'media/vin.svg' %}" type="svg">
</head>
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<main class="Prose">
    <h1><img src="https://upload.wikimedia.org/wikipedia/commons/f/f0/Google_Bard_logo.svg" alt="Sharon Lessman"
            width="85" height="85" style="margin-right: 10px; margin-bottom: 15px;">CareerIQ
        <img src="{%static 'media/vin.svg' %}" alt="Sharon Lessman" width="100" height="100"
            style="float:right; margin-right: 20px;"><br>

        <small>Career counseling for highschool and university students</small>
    </h1>
    <div class="content">
        <p><em style="font-size:110%;">CareerIQ is a website that can utilize ChatGPTâ€™s functions to become an assistant
                who can do a questionnaire, including hobbies, interests, the subjects that students good at,
                personalities, and their ambitions. </em></p>
    </div>

    <p>
    <form method="post" id="chat-form">
        {% csrf_token %}
        <div class="flex-grow-0 py-3 px-4 border-top">
            <div class="input-group">

                <textarea type="text" class="form-control" placeholder="Ask anything!" name="message" id="message"
                    autocomplete="off"></textarea>
                <button class="btn btn-primary" type="submit">Send</button>
            </div>
        </div>
    </form>
    <div id="chat-log"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@<version tag>/dist/showdown.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#chat-form').submit(function (event) {
                event.preventDefault();
                $.ajax({
                    url: '/chat/',
                    method: 'POST',
                    data: $(this).serialize(),
                    success: function (data) {
                        $('#chat-log').prepend('<p><strong>You:</strong> ' + $('#message').val() + '</p>');
                        $('#chat-log').prepend('<hr>');
                        $('#chat-log').prepend('<strong> Bard: </strong>' + data.bot_response);
                        $('#chat-log').prepend('<hr>');
                        $('#message').val('');
                    }
                });
            });
        });
    </script>
    </p>

</main>